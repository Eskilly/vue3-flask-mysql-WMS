"use strict";(self["webpackChunkmyweb"]=self["webpackChunkmyweb"]||[]).push([[649],{4649:function(e,l,a){a.r(l),a.d(l,{default:function(){return c}});var o=a(3396),r=a(9242),t=a(7139);const n={style:{"margin-bottom":"5px"}},m={class:"dialog-footer"};function d(e,l,a,d,u,i){const s=(0,o.up)("el-input"),p=(0,o.up)("el-option"),f=(0,o.up)("el-select"),g=(0,o.up)("el-button"),c=(0,o.up)("el-table-column"),w=(0,o.up)("el-tag"),b=(0,o.up)("el-popconfirm"),h=(0,o.up)("el-table"),W=(0,o.up)("el-pagination"),V=(0,o.up)("el-col"),_=(0,o.up)("el-form-item"),k=(0,o.up)("el-radio"),x=(0,o.up)("el-radio-group"),y=(0,o.up)("el-form"),C=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",n,[(0,o.Wm)(s,{modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=l=>e.name=l),placeholder:"请输入名字","suffix-icon":d.ElIconSearch,style:{width:"200px"},onKeyup:(0,r.D2)(d.loadPost,["enter"])},null,8,["modelValue","suffix-icon","onKeyup"]),(0,o.Wm)(f,{modelValue:e.sex,"onUpdate:modelValue":l[1]||(l[1]=l=>e.sex=l),filterable:"",placeholder:"请选择性别",style:{"margin-left":"5px"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.sexs,(e=>((0,o.wg)(),(0,o.j4)(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,o.Wm)(g,{plain:!1,round:!0,style:{"margin-left":"5px"},onClick:d.loadPost},{default:(0,o.w5)((()=>[(0,o.Uk)("查询")])),_:1},8,["onClick"]),(0,o.Wm)(g,{type:"success",onClick:d.resetParam},{default:(0,o.w5)((()=>[(0,o.Uk)("重置")])),_:1},8,["onClick"]),(0,o.Wm)(g,{plain:!1,round:!0,style:{"margin-left":"5px"},onClick:d.add},{default:(0,o.w5)((()=>[(0,o.Uk)("新增")])),_:1},8,["onClick"])]),(0,o.Wm)(h,{data:e.tableData,"header-cell-style":{background:"#f2f5fc",color:"#555555"},border:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{prop:"id",label:"ID",width:"60"}),(0,o.Wm)(c,{prop:"no",label:"账号",width:"150"}),(0,o.Wm)(c,{prop:"name",label:"姓名",width:"150"}),(0,o.Wm)(c,{prop:"age",label:"年龄",width:"80"}),(0,o.Wm)(c,{prop:"sex",label:"性别",width:"80"},{default:(0,o.w5)((e=>[(0,o.Wm)(w,{type:"1"===e.row.sex?"danger":"success","disable-transitions":""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)("1"===e.row.sex?"男":"女"),1)])),_:2},1032,["type"])])),_:1}),(0,o.Wm)(c,{prop:"roleId",label:"角色",width:"120"},{default:(0,o.w5)((e=>[(0,o.Wm)(w,{type:0===e.row.roleId?"danger":1===e.row.roleId?"primary":"success","disable-transitions":""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(0===e.row.roleId?"超级管理员":1===e.row.roleId?"管理员":"用户"),1)])),_:2},1032,["type"])])),_:1}),(0,o.Wm)(c,{prop:"phone",label:"电话",width:"180"}),(0,o.Wm)(c,{prop:"operate",label:"操作",width:"180"},{default:(0,o.w5)((e=>[(0,o.Wm)(g,{size:"small",type:"success",onClick:l=>d.mod(e.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("编辑")])),_:2},1032,["onClick"]),(0,o.Wm)(b,{title:"确定删除吗？",onConfirm:l=>d.del(e.row.id),style:{"margin-left":"5px"}},{reference:(0,o.w5)((()=>[(0,o.Wm)(g,{size:"small",type:"danger"},{default:(0,o.w5)((()=>[(0,o.Uk)("删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"]),(0,o.Wm)(W,{onSizeChange:d.handleSizeChange,onCurrentChange:d.handleCurrentChange,"current-page":e.pageNum,"page-sizes":[5,10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"]),(0,o.Wm)(C,{title:"提示",modelValue:e.centerDialogVisible,"onUpdate:modelValue":l[9]||(l[9]=l=>e.centerDialogVisible=l),width:"30%",center:""},{footer:(0,o.w5)((()=>[(0,o._)("span",m,[(0,o.Wm)(g,{onClick:l[8]||(l[8]=l=>e.centerDialogVisible=!1)},{default:(0,o.w5)((()=>[(0,o.Uk)("取 消")])),_:1}),(0,o.Wm)(g,{type:"primary",onClick:d.save},{default:(0,o.w5)((()=>[(0,o.Uk)("确 定")])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(y,{ref:"forms",rules:e.rules,model:e.form,"label-width":"80px"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{label:"账号",prop:"no"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{span:20},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{modelValue:e.form.no,"onUpdate:modelValue":l[2]||(l[2]=l=>e.form.no=l),modelModifiers:{trim:!0}},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(_,{label:"名字",prop:"name"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{span:20},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{modelValue:e.form.name,"onUpdate:modelValue":l[3]||(l[3]=l=>e.form.name=l),modelModifiers:{trim:!0}},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(_,{label:"密码",prop:"password"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{span:20},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{modelValue:e.form.password,"onUpdate:modelValue":l[4]||(l[4]=l=>e.form.password=l),modelModifiers:{trim:!0}},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(_,{label:"年龄",prop:"age"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{span:20},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{modelValue:e.form.age,"onUpdate:modelValue":l[5]||(l[5]=l=>e.form.age=l),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(_,{label:"性别"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{modelValue:e.form.sex,"onUpdate:modelValue":l[6]||(l[6]=l=>e.form.sex=l),modelModifiers:{trim:!0}},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{label:"1"},{default:(0,o.w5)((()=>[(0,o.Uk)("男")])),_:1}),(0,o.Wm)(k,{label:"0"},{default:(0,o.w5)((()=>[(0,o.Uk)("女")])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(_,{label:"电话",prop:"phone"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{span:20},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{modelValue:e.form.phone,"onUpdate:modelValue":l[7]||(l[7]=l=>e.form.phone=l),modelModifiers:{trim:!0}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["rules","model"])])),_:1},8,["modelValue"])])}var u=a(4870),i=a(7178),s=a(2748),p={setup(){const e=(0,o.f3)("axios"),l=(0,u.qj)({tableData:[],pageSize:10,pageNum:1,total:0,name:"",sex:"",sexs:[{value:"1",label:"男"},{value:"0",label:"女"}],centerDialogVisible:!1,form:{id:null,no:"",name:"",password:"",age:18,phone:"",sex:"0",roleId:1,isValid:"Y"}});let a=async()=>{if(l.form.age>150||l.form.age<18)throw new Error("年龄非法")},r=async()=>{if(l.form.id)return;const a=await e.get("/user/findByNo?no="+l.form.no);if(200==a.data.code)throw new Error("账号已经存在")};function t(){Object.keys(l.form).forEach((e=>{l.form[e]=""}))}function n(l){console.log(l),e.get("/user/del?id="+l).then((e=>e.data)).then((e=>{console.log(e),200==e.code?(i.z8.success("操作成功！"),W()):i.z8.error("操作失败！")}))}function m(e){console.log(e),l.centerDialogVisible=!0,(0,o.Y3)((()=>{l.form.id=e.id,l.form.no=e.no,l.form.name=e.name,l.form.password="",l.form.age=e.age+"",l.form.sex=e.sex+"",l.form.phone=e.phone,l.form.roleId=e.roleId}))}function d(){l.centerDialogVisible=!0,(0,o.Y3)((()=>{t()}))}function p(){l.form.roleId=2,l.form.isValid="Y",e.post("/user/save",l.form).then((e=>e.data)).then((e=>{console.log(e),200==e.code?(i.z8.success("操作成功！"),l.centerDialogVisible=!1,W(),t()):i.z8.error("操作失败！")}))}function f(){e.post("/user/update",l.form).then((e=>e.data)).then((e=>{console.log(e),200==e.code?(i.z8.success("操作成功！"),l.centerDialogVisible=!1,W(),t()):i.z8.error("操作失败！")}))}l.rules={no:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"},{validator:r,trigger:"blur"}],name:[{required:!0,message:"请输入名字",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],age:[{required:!0,message:"请输入年龄",trigger:"blur"},{pattern:/^([1-9][0-9]*){1,3}$/,message:"年龄必须为正整数字",trigger:"blur"},{validator:a,trigger:"blur"}],phone:[{required:!0,message:"手机号不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]};const g=(0,u.iH)(null);function c(){g.value.validate((e=>{if(!e)return console.log("error submit!!"),!1;l.form.id?f():p()}))}function w(e){console.log(`每页 ${e} 条`),l.pageNum=1,l.pageSize=e,W()}function b(e){console.log(`当前页: ${e}`),l.pageNum=e,W()}function h(){l.name="",l.sex=""}function W(){e.post("/user/listPage",{pageSize:l.pageSize,pageNum:l.pageNum,param:{name:l.name,sex:l.sex,roleId:"2"}}).then((e=>e.data)).then((e=>{200==e.code?(l.tableData=e.data,l.total=e.total):alert("获取数据失败")}))}return(0,o.wF)((()=>{W()})),{...(0,u.BK)(l),ElIconSearch:s.Search,forms:g,del:n,mod:m,add:d,save:c,handleCurrentChange:b,handleSizeChange:w,resetParam:h,loadPost:W}},name:"UserManage"},f=a(89);const g=(0,f.Z)(p,[["render",d]]);var c=g}}]);
//# sourceMappingURL=649.8ecc670d.js.map
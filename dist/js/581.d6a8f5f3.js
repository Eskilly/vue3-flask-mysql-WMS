"use strict";(self["webpackChunkmyweb"]=self["webpackChunkmyweb"]||[]).push([[581],{1581:function(e,a,t){t.r(a),t.d(a,{default:function(){return m}});var o=t(3396),l=t(9242);const n={style:{"margin-bottom":"5px"}};function r(e,a,t,r,d,i){const u=(0,o.up)("el-input"),s=(0,o.up)("el-option"),p=(0,o.up)("el-select"),m=(0,o.up)("el-button"),g=(0,o.up)("el-table-column"),c=(0,o.up)("el-table"),h=(0,o.up)("el-pagination");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",n,[(0,o.Wm)(u,{modelValue:e.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.name=a),modelModifiers:{trim:!0},placeholder:"请输入物品名","suffix-icon":r.ElIconSearch,style:{width:"200px"},onKeyup:(0,l.D2)(r.loadPost,["enter"])},null,8,["modelValue","suffix-icon","onKeyup"]),(0,o.Wm)(p,{modelValue:e.storage,"onUpdate:modelValue":a[1]||(a[1]=a=>e.storage=a),placeholder:"请选择仓库",style:{"margin-left":"5px"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.storageData,(e=>((0,o.wg)(),(0,o.j4)(s,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,o.Wm)(p,{modelValue:e.goodstype,"onUpdate:modelValue":a[2]||(a[2]=a=>e.goodstype=a),placeholder:"请选择分类",style:{"margin-left":"5px"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.goodstypeData,(e=>((0,o.wg)(),(0,o.j4)(s,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,o.Wm)(m,{type:"primary",style:{"margin-left":"5px"},onClick:r.loadPost},{default:(0,o.w5)((()=>[(0,o.Uk)("查询")])),_:1},8,["onClick"]),(0,o.Wm)(m,{type:"success",onClick:r.resetParam},{default:(0,o.w5)((()=>[(0,o.Uk)("重置")])),_:1},8,["onClick"])]),(0,o.Wm)(c,{data:e.tableData,"header-cell-style":{background:"#f2f5fc",color:"#555555"},border:""},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{prop:"id",label:"ID",width:"60"}),(0,o.Wm)(g,{prop:"action",label:"操作",width:"60"}),(0,o.Wm)(g,{prop:"goodsname",label:"物品名",width:"180"}),(0,o.Wm)(g,{prop:"count",label:"数量",width:"100"}),(0,o.Wm)(g,{prop:"storagename",label:"仓库",width:"180"}),(0,o.Wm)(g,{prop:"goodstypename",label:"分类",width:"180"}),(0,o.Wm)(g,{prop:"adminname",label:"操作人",width:"180"}),(0,o.Wm)(g,{prop:"username",label:"申请人",width:"180"}),(0,o.Wm)(g,{prop:"createtime",label:"操作时间",width:"220"}),(0,o.Wm)(g,{prop:"remark",label:"备注"})])),_:1},8,["data"]),(0,o.Wm)(h,{onSizeChange:r.handleSizeChange,onCurrentChange:r.handleCurrentChange,"current-page":e.pageNum,"page-sizes":[5,10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])}var d=t(4870),i=t(2748),u={setup(){const e=(0,o.f3)("axios"),a=(0,d.qj)({user:JSON.parse(sessionStorage.getItem("CurUser")),storageData:[],goodstypeData:[],tableData:[],pageSize:10,pageNum:1,total:0,name:"",storage:"",goodstype:"",centerDialogVisible:!1,form:{id:"",name:"",storage:"",goodstype:"",count:"",remark:""}});function t(e){let t=a.storageData.find((a=>a.id==e.storage));return t&&t.name}function l(e){let t=a.goodstypeData.find((a=>a.id==e.goodstype));return t&&t.name}function n(){Object.keys(a.form).forEach((e=>{a.form[e]=""}))}function r(e){console.log(`每页 ${e} 条`),a.pageNum=1,a.pageSize=e,p()}function u(e){console.log(`当前页: ${e}`),a.pageNum=e,p()}function s(){a.name="",a.storage="",a.goodstype=""}function p(){e.post("/record/listPage",{pageSize:a.pageSize,pageNum:a.pageNum,param:{name:a.name,goodstype:a.goodstype,storage:a.storage,roleId:a.user.roleId,userId:a.user.id}}).then((e=>e.data)).then((e=>{200==e.code?(a.tableData=e.data,a.tableData.forEach((e=>{const a=new Date(e.createtime);e.createtime=a.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",weekday:"short",hour:"numeric",minute:"numeric",second:"numeric"})})),a.total=e.total):alert("获取数据失败")}))}function m(){e.get("/storage/list").then((e=>e.data)).then((e=>{console.log(e),200==e.code?a.storageData=e.data:alert("获取数据失败")}))}function g(){e.get("/goodstype/list").then((e=>e.data)).then((e=>{console.log(e),200==e.code?a.goodstypeData=e.data:alert("获取数据失败")}))}return(0,o.wF)((()=>{g(),m(),p()})),{...(0,d.BK)(a),ElIconSearch:i.Search,formatGoodstype:l,formatStorage:t,resetForm:n,handleCurrentChange:u,handleSizeChange:r,resetParam:s,loadPost:p}},name:"RecordManage"},s=t(89);const p=(0,s.Z)(u,[["render",r]]);var m=p}}]);
//# sourceMappingURL=581.d6a8f5f3.js.map
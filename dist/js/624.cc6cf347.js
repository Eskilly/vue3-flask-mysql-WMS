"use strict";(self["webpackChunkmyweb"]=self["webpackChunkmyweb"]||[]).push([[624],{2624:function(e,a,t){t.r(a),t.d(a,{default:function(){return h}});var l=t(3396),s=t(9242),o=t(7139);const r={style:{"margin-bottom":"5px"}},i={class:"dialog-footer"};function n(e,a,t,n,m,u){const d=(0,l.up)("el-input"),p=(0,l.up)("el-option"),h=(0,l.up)("el-select"),g=(0,l.up)("el-button"),f=(0,l.up)("el-table-column"),c=(0,l.up)("el-tag"),w=(0,l.up)("el-popconfirm"),b=(0,l.up)("el-table"),v=(0,l.up)("el-pagination"),W=(0,l.up)("el-col"),x=(0,l.up)("el-form-item"),y=(0,l.up)("el-radio"),_=(0,l.up)("el-radio-group"),k=(0,l.up)("el-form"),C=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",r,[(0,l.Wm)(d,{value:m.name,"onUpdate:value":a[0]||(a[0]=e=>m.name=e),placeholder:"请输入名字","suffix-icon":m.ElIconSearch,style:{width:"200px"},onKeyup:(0,s.D2)(u.loadPost,["enter"])},null,8,["value","suffix-icon","onKeyup"]),(0,l.Wm)(h,{value:m.sex,"onUpdate:value":a[1]||(a[1]=e=>m.sex=e),filterable:"",placeholder:"请选择性别",style:{"margin-left":"5px"}},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(m.sexs,(e=>((0,l.wg)(),(0,l.j4)(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["value"]),(0,l.Wm)(g,{type:"primary",style:{"margin-left":"5px"},onClick:u.loadPost},{default:(0,l.w5)((()=>[(0,l.Uk)("查询")])),_:1},8,["onClick"]),(0,l.Wm)(g,{type:"success",onClick:u.resetParam},{default:(0,l.w5)((()=>[(0,l.Uk)("重置")])),_:1},8,["onClick"]),(0,l.Wm)(g,{type:"primary",style:{"margin-left":"5px"},onClick:u.add},{default:(0,l.w5)((()=>[(0,l.Uk)("新增")])),_:1},8,["onClick"])]),(0,l.Wm)(b,{data:m.tableData,"header-cell-style":{background:"#f2f5fc",color:"#555555"},border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{prop:"id",label:"ID",width:"60"}),(0,l.Wm)(f,{prop:"no",label:"账号",width:"180"}),(0,l.Wm)(f,{prop:"name",label:"姓名",width:"180"}),(0,l.Wm)(f,{prop:"age",label:"年龄",width:"80"}),(0,l.Wm)(f,{prop:"sex",label:"性别",width:"80"},{default:(0,l.w5)((e=>[(0,l.Wm)(c,{type:1===e.row.sex?"primary":"success","disable-transitions":""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(1===e.row.sex?"男":"女"),1)])),_:2},1032,["type"])])),_:1}),(0,l.Wm)(f,{prop:"roleId",label:"角色",width:"120"},{default:(0,l.w5)((e=>[(0,l.Wm)(c,{type:0===e.row.roleId?"danger":1===e.row.roleId?"primary":"success","disable-transitions":""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(0===e.row.roleId?"超级管理员":1===e.row.roleId?"管理员":"用户"),1)])),_:2},1032,["type"])])),_:1}),(0,l.Wm)(f,{prop:"phone",label:"电话",width:"180"}),(0,l.Wm)(f,{prop:"operate",label:"操作"},{default:(0,l.w5)((e=>[(0,l.Wm)(g,{size:"small",type:"success",onClick:a=>u.mod(e.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("编辑")])),_:2},1032,["onClick"]),(0,l.Wm)(w,{title:"确定删除吗？",onConfirm:a=>u.del(e.row.id),style:{"margin-left":"5px"}},{reference:(0,l.w5)((()=>[(0,l.Wm)(g,{size:"small",type:"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)("删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"]),(0,l.Wm)(v,{onSizeChange:u.handleSizeChange,onCurrentChange:u.handleCurrentChange,"current-page":m.pageNum,"page-sizes":[5,10,20,30],"page-size":m.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:m.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"]),(0,l.Wm)(C,{title:"提示",visible:m.centerDialogVisible,"onUpdate:visible":a[9]||(a[9]=e=>m.centerDialogVisible=e),width:"30%",center:""},{footer:(0,l.w5)((()=>[(0,l._)("span",i,[(0,l.Wm)(g,{onClick:a[8]||(a[8]=e=>m.centerDialogVisible=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("取 消")])),_:1}),(0,l.Wm)(g,{type:"primary",onClick:u.save},{default:(0,l.w5)((()=>[(0,l.Uk)("确 定")])),_:1},8,["onClick"])])])),default:(0,l.w5)((()=>[(0,l.Wm)(k,{ref:"form",rules:m.rules,model:m.form,"label-width":"80px"},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{label:"账号",prop:"no"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{span:20},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{value:m.form.no,"onUpdate:value":a[2]||(a[2]=e=>m.form.no=e)},null,8,["value"])])),_:1})])),_:1}),(0,l.Wm)(x,{label:"名字",prop:"name"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{span:20},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{value:m.form.name,"onUpdate:value":a[3]||(a[3]=e=>m.form.name=e)},null,8,["value"])])),_:1})])),_:1}),(0,l.Wm)(x,{label:"密码",prop:"password"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{span:20},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{value:m.form.password,"onUpdate:value":a[4]||(a[4]=e=>m.form.password=e)},null,8,["value"])])),_:1})])),_:1}),(0,l.Wm)(x,{label:"年龄",prop:"age"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{span:20},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{value:m.form.age,"onUpdate:value":a[5]||(a[5]=e=>m.form.age=e)},null,8,["value"])])),_:1})])),_:1}),(0,l.Wm)(x,{label:"性别"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{value:m.form.sex,"onUpdate:value":a[6]||(a[6]=e=>m.form.sex=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{label:"1"},{default:(0,l.w5)((()=>[(0,l.Uk)("男")])),_:1}),(0,l.Wm)(y,{label:"0"},{default:(0,l.w5)((()=>[(0,l.Uk)("女")])),_:1})])),_:1},8,["value"])])),_:1}),(0,l.Wm)(x,{label:"电话",prop:"phone"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{span:20},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{value:m.form.phone,"onUpdate:value":a[7]||(a[7]=e=>m.form.phone=e)},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["rules","model"])])),_:1},8,["visible"])])}var m=t(2748),u={data(){let e=(e,a,t)=>{a>150||a<16?t(new Error("年龄不合适")):t()},a=(e,a,t)=>{if(this.form.id)return t();this.$axios.get(this.$httpUrl+"/user/findByNo?no="+this.form.no).then((e=>e.data)).then((e=>{200!=e.code?t():t(new Error("账号已经存在"))}))};return{tableData:[],pageSize:10,pageNum:1,total:0,name:"",sex:"",sexs:[{value:"1",label:"男"},{value:"0",label:"女"}],centerDialogVisible:!1,form:{id:"",no:"",name:"",password:"",age:"",phone:"",sex:"0",roleId:"1"},rules:{no:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"},{validator:a,trigger:"blur"}],name:[{required:!0,message:"请输入名字",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],age:[{required:!0,message:"请输入年龄",trigger:"blur"},{min:1,max:3,message:"长度在 1 到 3 个位",trigger:"blur"},{pattern:/^([1-9][0-9]*){1,3}$/,message:"年龄必须为正整数字",trigger:"blur"},{validator:e,trigger:"blur"}],phone:[{required:!0,message:"手机号不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]},ElIconSearch:m.Search}},name:"M-ain",methods:{resetForm(){this.$refs.form.resetFields()},del(e){this.$axios.get(this.$httpUrl+"/user/del?id="+e).then((e=>e.data)).then((e=>{console.log(e),200==e.code?(this.$message({message:"操作成功！",type:"success"}),this.loadPost()):this.$message({message:"操作失败！",type:"error"})}))},mod(e){console.log(e),this.centerDialogVisible=!0,this.$nextTick((()=>{this.form.id=e.id,this.form.no=e.no,this.form.name=e.name,this.form.password="",this.form.age=e.age+"",this.form.sex=e.sex+"",this.form.phone=e.phone,this.form.roleId=e.roleId}))},add(){this.centerDialogVisible=!0,this.$nextTick((()=>{this.resetForm()}))},doSave(){this.$axios.post(this.$httpUrl+"/user/save",this.form).then((e=>e.data)).then((e=>{console.log(e),200==e.code?(this.$message({message:"操作成功！",type:"success"}),this.centerDialogVisible=!1,this.loadPost(),this.resetForm()):this.$message({message:"操作失败！",type:"error"})}))},doMod(){this.$axios.post(this.$httpUrl+"/user/update",this.form).then((e=>e.data)).then((e=>{console.log(e),200==e.code?(this.$message({message:"操作成功！",type:"success"}),this.centerDialogVisible=!1,this.loadPost(),this.resetForm()):this.$message({message:"操作失败！",type:"error"})}))},save(){this.$refs.form.validate((e=>{if(!e)return console.log("error submit!!"),!1;this.form.id?this.doMod():this.doSave()}))},handleSizeChange(e){console.log(`每页 ${e} 条`),this.pageNum=1,this.pageSize=e,this.loadPost()},handleCurrentChange(e){console.log(`当前页: ${e}`),this.pageNum=e,this.loadPost()},loadGet(){this.$axios.get(this.$httpUrl+"/user/list").then((e=>e.data)).then((e=>{console.log(e)}))},resetParam(){this.name="",this.sex=""},loadPost(){this.$axios.post(this.$httpUrl+"/user/listPageC1",{pageSize:this.pageSize,pageNum:this.pageNum,param:{name:this.name,sex:this.sex}}).then((e=>e.data)).then((e=>{console.log(e),200==e.code?(this.tableData=e.data,this.total=e.total):alert("获取数据失败")}))}},beforeMount(){this.loadPost()}},d=t(89);const p=(0,d.Z)(u,[["render",n]]);var h=p}}]);
//# sourceMappingURL=624.cc6cf347.js.map